@tailwind base;
@tailwind components;
@tailwind utilities;

html { width: 100%; max-width: 100vw; overflow-x: hidden; }
body { 
	width: 100%; 
	max-width: 100vw; 
	overflow-x: hidden; 
	background: linear-gradient(135deg, #23004B 0%, #2F0959 100%);
}

@keyframes shake {
	0% { transform: translateX(0); }
	20% { transform: translateX(-6px); }
	40% { transform: translateX(6px); }
	60% { transform: translateX(-4px); }
	80% { transform: translateX(4px); }
	100% { transform: translateX(0); }
}
.animate-shake {
	animation: shake 0.3s;
}

@keyframes magicIn {
	0% { opacity: 0; transform: translateY(-8px) scale(.96); filter: blur(4px); }
	60% { opacity: 1; transform: translateY(2px) scale(1.02); filter: blur(0); }
	100% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
}
@keyframes magicOut {
	0% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
	100% { opacity: 0; transform: translateY(-6px) scale(.9); filter: blur(6px); }
}
.animate-magic-in { animation: magicIn .45s cubic-bezier(.22,.68,.43,1.01); }
.prose-premium {
	max-width: none;
}
.animate-magic-out { animation: magicOut .45s forwards; }

/* Display (read mode): make HR white only when content is inverted (e.g., book index) */
.prose.prose-invert hr {
	border: none;
	border-top: 1px solid #ffffff;
	opacity: 1;
}

/* Light mode chapter content: hr should be extradark */
.prose hr {
  border: none;
  border-top: 1px solid #23004B; /* readowl-purple.extradark */
  opacity: 1;
}

/* Premium prose styling for documentation */
.prose-premium h2, .prose-premium h3, .prose-premium h4 {
	font-weight: 900;
	letter-spacing: -0.5px;
	color: #ffffff;
}
.prose-premium p {
	line-height: 1.65;
	color: rgba(255,255,255,0.9);
}
.prose-premium blockquote {
	border-left: 4px solid #2F0959;
	background: rgba(103,80,164,0.10);
	font-style: italic;
	color: rgba(255,255,255,0.9);
	border-radius: 0 1rem 1rem 0;
	padding: 1rem 1.25rem;
	margin: 1.5rem 0;
	box-shadow: 0 2px 4px -2px rgba(0,0,0,0.4);
}
.prose-premium code {
	background: rgba(47,9,89,0.4);
	color: #F0EAFF;
	padding: 0.25rem 0.5rem;
	border-radius: 0.375rem;
	font-size: 0.85rem;
	font-weight: 500;
}
.prose-premium a {
	color: #9E85E0;
	text-decoration: underline;
	text-decoration-color: rgba(158,133,224,0.4);
}
.prose-premium a:hover { text-decoration-color: #9E85E0; }
.prose-premium ul li::marker { color: #9E85E0; }
.prose-premium strong { color: #ffffff; font-weight: 600; }

/* Onomatopeia emphasis */
.onomatopeia {
	font-weight: 800;
	font-style: italic;
	letter-spacing: 0.05em;
	color: #9E85E0;
	filter: drop-shadow(0 1px 2px rgba(0,0,0,0.4));
}

/* --- Chapter reading: honor image alignment saved in the editor --- */
/* Tailwind Typography (.prose) centers images by default; these rules realign images according to parent text-align */
/* Center */
.prose p[style*="text-align:center"] > img,
.prose p[style*="text-align: center"] > img,
.prose p[data-align="center"] > img,
.prose p[style*="text-align:center"] > a > img,
.prose p[style*="text-align: center"] > a > img,
.prose p[data-align="center"] > a > img {
	display: block;
	margin-left: auto;
	margin-right: auto;
	float: none;
}
/* Right */
.prose p[style*="text-align:right"] > img,
.prose p[style*="text-align: right"] > img,
.prose p[data-align="right"] > img,
.prose p[style*="text-align:right"] > a > img,
.prose p[style*="text-align: right"] > a > img,
.prose p[data-align="right"] > a > img {
	display: block;
	margin-left: auto;
	margin-right: 0;
	float: none;
}
/* Left */
.prose p[style*="text-align:left"] > img,
.prose p[style*="text-align: left"] > img,
.prose p[data-align="left"] > img,
.prose p[style*="text-align:left"] > a > img,
.prose p[style*="text-align: left"] > a > img,
.prose p[data-align="left"] > a > img {
	display: block;
	margin-left: 0;
	margin-right: auto;
	float: none;
}
